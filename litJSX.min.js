!function(){const t=t=>Symbol(t);class e{constructor(t=null){this.parent=t}}const n={INIT:t("init"),LEAVE:t("leave"),SKIP_SPACE:t("skip_space")};Object.freeze(n);class s{constructor(t,s){this.rule=t,this.data=new e,this.finished=!1,this.state=n.INIT,this.stack=[],this.str=s,this.ptr=0}enter(){this.data=new e(this.data)}leave(){null!=this.data.parent?this.data=this.data.parent:this.finished=!0}run(){try{return this._run()}catch(t){const e=this.str.match(/[^\r\n]+\r?\n?/g),n=this.ptr;let s=0,a=0,r=0;for(;a<n;){let t=a+e[s].length;if(t>=n){r=n-a;break}a=t,s++}const i=`at\n${e[s]}\n`+`${function(t,e){let n="";for(;e-- >0;)n+=t;return n}(" ",r)}^ at line ${s} col ${r}\n`+t.message,c=new Error(i);throw c.originalError=t,c}}_run(){for(this.stack.push(this.rule);!this.finished;)"object"==typeof this.state?(this.stack.push(this.state),this.state=n.INIT,this.enter()):this.state===n.LEAVE&&(this.stack.pop(),this.leave(),this.state=n.INIT),null==this.stack[this.stack.length-1]?this.finished=!0:this.stack[this.stack.length-1][this.state](this);return this.data}walk(t){const e=this.ptr;t.lastIndex=this.ptr;const n=t.exec(this.str);if(n&&n.index>=this.ptr){const t=n.index,s=this.str.slice(e,t);return this.ptr=t,s}return null}expect(t){return t.lastIndex=0,t.test(this.str.slice(this.ptr))}isEOS(){return this.ptr>=this.str.length}}const a=/[^\s\r\n]/g,r=/<|$/g,i=Object.assign({},n,{MATCH_TAG:t("match_tag"),TAG:{LEFT:{OPEN:t("open"),CLOSE:t("close")},NAME:t("name"),ATTRIB:{SPREAD:t("spread"),NAME:t("name"),VALUE:t("value")},RIGHT:{OPEN:t("open"),CLOSE:t("close")}}});class c{constructor(t="",e={},n=[],s=null){this.name=t,this.attributes=e,this.attributeMixins=[],this.elements=n,this.parent=s}append(t){this.elements.push(t)}toJSON(){return{name:this.name,attributes:this.attributes,elements:this.elements.map(t=>"string"==typeof t?t:t.toJSON()),attributeMixins:this.attributeMixins}}}const l={[i.INIT](t){const e=t.data;if(e.initilized||(e.initilized=!0,e.tree=new c("__Fragment__"),e.stack=[e.tree],e.peak=(()=>e.stack[e.stack.length-1]),e.addAndEnter=((t,n,s,a)=>{const r=new c(t,n,a,e.peak());r.attributeMixins=s||[],e.peak().append(r),e.stack.push(r)}),e.add=((t,n,s,a)=>{const r=new c(t,n,a,e.peak());r.attributeMixins=s||[],e.peak().append(r)}),e.leave=(()=>{e.stack.pop()})),t.isEOS()){if(t.state=i.LEAVE,1!==e.stack.length)throw new Error("unclosed tags "+e.stack.slice(1).map(t=>`<${t.name}>`).join(""))}else t.state=i.SKIP_SPACE},[i.SKIP_SPACE](t){t.walk(a),t.state=i.MATCH_TAG},[i.MATCH_TAG](t){t.expect(/^</)?t.state=this.TAG:t.state=this.TEXT},TAG:{[i.INIT](t){const e=t.data;if(!e.initilized)return e.initilized=!0,e.attributes={},e.attributeMixins=[],e.name=null,e.left=null,e.attributes={},e.right=null,e.part="left",void(t.state=this.LEFT);if("left"===e.part)return e.part="name",void(t.state=i.TAG.NAME);if("name"===e.part)return e.part="attributes",void(t.state=this.ATTRIB);if("attributes"===e.part)return e.part="right",void(t.state=this.RIGHT);if("right"!==e.part);else{if("close"===e.left&&"close"===e.right)throw new Error("both end clossed tag");if("close"===e.left){if(Object.keys(e.attributes).length>0)throw new Error("close tag can't has attribute");if((e.name||"__Fragment__")!==e.parent.peak().name)throw new Error(`wat? <${e.parent.peak().name}></${e.name}>`);e.parent.leave()}else if("close"===e.right){if(!e.name)throw new Error("you can't write a self close fragment!");e.parent.add(e.name,e.attributes,e.attributeMixins,[])}else e.parent.addAndEnter(e.name||"__Fragment__",e.attributes,e.attributeMixins,[]);t.state=i.LEAVE}},LEFT:{[i.INIT](t){const e=t.data.parent;t.expect(/^<\//)?(t.ptr+=2,e.left="close"):(t.ptr+=1,e.left="open"),t.state=n.LEAVE}},[i.TAG.NAME](t){t.walk(a);const e=t.walk(/(\s|\/?>)/g);t.data.name=e,t.state=n.INIT},ATTRIB:{[i.INIT](t){t.walk(a),t.expect(/^\/?>/)?t.state=n.LEAVE:t.expect(/^\.\.\.\S/)?t.state=i.TAG.ATTRIB.SPREAD:t.state=i.TAG.ATTRIB.NAME},[i.TAG.ATTRIB.SPREAD](t){t.ptr+=3;const e=t.walk(/(\s|\r|\n|\/?>)/g);t.data.parent.attributeMixins.push(e),t.state=i.INIT},[i.TAG.ATTRIB.NAME](t){const e=t.walk(/(=|\s|\/?>)/g),n=t.data,s=t.data.parent;if(0===e.length)throw new Error("attribute without name");t.expect(/^=\S/)?(t.ptr++,n.name=e,t.state=i.TAG.ATTRIB.VALUE):t.expect(/^=/)?(t.ptr++,s.attributes[e]="",t.state=i.INIT):(s.attributes[e]="",t.state=i.INIT)},[i.TAG.ATTRIB.VALUE](t){let e;t.expect(/^'/)?(t.ptr++,e=t.walk(/'/g),t.ptr++):t.expect(/^"/)?(t.ptr++,e=t.walk(/"/g),t.ptr++):e=t.walk(/(\s|\/?>)/g);const s=t.data;t.data.parent.attributes[s.name]=e,t.state=n.INIT}},RIGHT:{[i.INIT](t){const e=t.data.parent;t.expect(/^\/>/)?(t.ptr+=2,e.right="close"):(t.ptr+=1,e.right="open"),t.state=n.LEAVE}}},TEXT:{[i.INIT](t){const e=t.walk(r);if(null==e)throw new Error("unknown state, how should I enter here?");const n=t.data.parent;e.match(/[^\s\r\n]/)&&n.peak().elements.push(e.replace(/[\s|\r|\n]+$/,"")),t.state=i.LEAVE}}},o=new WeakMap;function h(t,e){return function(n,...a){if(o.has(n))return o.get(n)(t,e,...a);const r=[];let i="";const c=Math.random().toString(16).slice(2,10);for(let t=0;t<n.length;t++)t>0&&(i+=`$place_${c}_${t-1}$`,r.push(`$place_${c}_${t-1}$`)),i+=n[t];const h=new RegExp(`\\$place_${c}_\\d+\\$`,"g");let p=new s(l,i).run().tree;1===p.elements.length&&"string"!=typeof p.elements[0]&&(p=p.elements[0]);const u=function(t){function n(t,e){let n="";e.match(h)?n+="["+JSON.stringify(e).replace(h,function(t){return'"+'+t+'+"'})+"]":n+=JSON.stringify(e),n+=":";const s=t.attributes[e],a=s.match(h);return a?a[0]===s?n+=a[0]:n+=JSON.stringify(s).replace(h,function(t){return'"+'+t+'+"'}):n+=JSON.stringify(s),n}return"return "+function t(s){return"string"==typeof s?JSON.stringify((a=s,a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&nbsp;/g,"Â ").replace(/&amp;/g,"&"))).replace(h,function(t){return'" , '+t+' , "'}):`React.createElement(${"__Fragment__"==s.name?"React.Fragment":void 0!==e[s.name]?"components."+s.name:JSON.stringify(s.name)}, ${s.attributeMixins.length>0?"Object.assign({}, {"+Object.keys(s.attributes).map(t=>n(s,t)).join(",\n")+"},"+s.attributeMixins.map(function(t){if(t.match(h))return t.match(h)[0];throw new Error("cannot expand a string "+t)}).join(",")+")":Object.keys(s.attributes).length>0?"{"+Object.keys(s.attributes).map(t=>n(s,t)).join(",")+"}":"null"},${s.elements.map(t).join(",")})`;var a}(t).replace(/^[\s\r\n]+/,"")}(p),T=new Function("React","components",...r,u);return o.set(n,T),T(t,e,...a)}}"undefined"!=typeof module?module.exports={STATE:n,JSX_STATE:i,rules:l,Data:e,Context:s,JSXElement:c,jsx:h}:void 0!==typeof window&&(window.litJSX={cache:o,STATE:n,JSX_STATE:i,rules:l,Data:e,Context:s,JSXElement:c,jsx:h})}();
!function(){class t{constructor(t=null){this.parent=t}}const e={INIT:Symbol("init"),LEAVE:Symbol("leave"),SKIP_SPACE:Symbol("skip_space")};Object.freeze(e);class a{constructor(a,r){this.rule=a,this.data=new t,this.finished=!1,this.state=e.INIT,this.stack=[],this.str=r,this.ptr=0}enter(){this.data=new t(this.data)}leave(){null!=this.data.parent?this.data=this.data.parent:this.finished=!0}run(){try{return this._run()}catch(t){let e=this.str.match(/[^\r\n]+\r?\n?/g),a=this.ptr,r=0,n=0,s=0;for(;n<a;){let t=n+e[r].length;if(t>=a){s=a-n;break}n=t,r++}let i=`at\n${e[r]}\n`+`${function(t,e){for(var a="";e-- >0;)a+=t;return a}(" ",s)}^ at line ${r} col ${s}\n`+t.message,l=new Error(i);throw l.originalError=t,l}}_run(){for(this.stack.push(this.rule);!this.finished;)"object"==typeof this.state?(this.stack.push(this.state),this.state=e.INIT,this.enter()):this.state===e.LEAVE&&(this.stack.pop(),this.leave(),this.state=e.INIT),null==this.stack[this.stack.length-1]?this.finished=!0:this.stack[this.stack.length-1][this.state](this);return this.data}walk(t){let e=this.ptr;t.lastIndex=this.ptr;let a=t.exec(this.str);if(a&&a.index>=this.ptr){let t=a.index,r=this.str.slice(e,t);return this.ptr=t,r}return null}expect(t){return t.lastIndex=0,t.test(this.str.slice(this.ptr))}isEOS(){return this.ptr>=this.str.length}}var r=/[^\s\r\n]/g,n=/<|$/g,s=Object.assign({},e,{MATCH_TAG:Symbol("match_tag"),TAG:{LEFT:{OPEN:Symbol("open"),CLOSE:Symbol("close")},NAME:Symbol("name"),ATTRIB:{SPREAD:Symbol("spread"),NAME:Symbol("name"),VALUE:Symbol("value")},RIGHT:{OPEN:Symbol("open"),CLOSE:Symbol("close")}}});class i{constructor(t="",e={},a=[],r=null){this.name=t,this.attributes=e,this.attributeMixins=[],this.elements=a,this.parent=r}append(t){this.elements.push(t)}toJSON(){return{name:this.name,attributes:this.attributes,elements:this.elements.map(t=>"string"==typeof t?t:t.toJSON()),attributeMixins:this.attributeMixins}}}var l={[s.INIT](t){var e=t.data;if(e.initilized||(e.initilized=!0,e.tree=new i("__Fragment__"),e.stack=[e.tree],e.getTop=(()=>e.stack[e.stack.length-1]),e.addAndEnter=function(t,a,r,n){var s=new i(t,a,n,e.getTop());s.attributeMixins=r||[],e.getTop().append(s),e.stack.push(s)},e.add=function(t,a,r,n){var s=new i(t,a,n,e.getTop());s.attributeMixins=r||[],e.getTop().append(s)},e.leave=function(){e.stack.pop()}),t.isEOS()){if(t.state=s.LEAVE,1!==e.stack.length)throw new Error("unclosed tags "+e.stack.slice(1).map(t=>`<${t.name}>`).join(""))}else t.state=s.SKIP_SPACE},[s.SKIP_SPACE](t){t.walk(r),t.state=s.MATCH_TAG},[s.MATCH_TAG](t){t.expect(/^</)?t.state=this.TAG:t.state=this.TEXT},TAG:{[s.INIT](t){var e=t.data;if(!e.initilized)return e.initilized=!0,e.attributes={},e.attributeMixins=[],e.name=null,e.left=null,e.attributes={},e.right=null,e.part="left",void(t.state=this.LEFT);if("left"===e.part)return e.part="name",void(t.state=s.TAG.NAME);if("name"===e.part)return e.part="attributes",void(t.state=this.ATTRIB);if("attributes"===e.part)return e.part="right",void(t.state=this.RIGHT);if("right"!==e.part);else{if("close"===e.left&&"close"===e.right)throw new Error("both end clossed tag");if("close"===e.left){if(Object.keys(e.attributes).length>0)throw new Error("close tag can't has attribute");if((e.name||"__Fragment__")!==e.parent.getTop().name)throw new Error(`wat? <${e.parent.getTop().name}></${e.name}>`);e.parent.leave()}else if("close"===e.right){if(!e.name)throw new Error("you can't write a self close fragment!");e.parent.add(e.name,e.attributes,e.attributeMixins,[])}else e.parent.addAndEnter(e.name||"__Fragment__",e.attributes,e.attributeMixins,[]);t.state=s.LEAVE}},LEFT:{[s.INIT](t){var a=t.data.parent;t.expect(/^<\//)?(t.ptr+=2,a.left="close"):(t.ptr+=1,a.left="open"),t.state=e.LEAVE}},[s.TAG.NAME](t){t.walk(r);var a=t.walk(/(\s|\/?>)/g);t.data.name=a,t.state=e.INIT},ATTRIB:{[s.INIT](t){t.walk(r),t.expect(/^\/?>/)?t.state=e.LEAVE:t.expect(/^\.\.\.\S/)?t.state=s.TAG.ATTRIB.SPREAD:t.state=s.TAG.ATTRIB.NAME},[s.TAG.ATTRIB.SPREAD](t){t.ptr+=3;var e=t.walk(/(\s|\r|\n|\/?>)/g);t.data.parent.attributeMixins.push(e),t.state=s.INIT},[s.TAG.ATTRIB.NAME](t){var e=t.walk(/(=|\s|\/?>)/g),a=t.data,r=t.data.parent;if(0===e.length)throw new Error("attribute without name");t.expect(/^=\S/)?(t.ptr++,a.name=e,t.state=s.TAG.ATTRIB.VALUE):t.expect(/^=/)?(t.ptr++,r.attributes[e]="",t.state=s.INIT):(r.attributes[e]="",t.state=s.INIT)},[s.TAG.ATTRIB.VALUE](t){if(t.expect(/^'/)){t.ptr++;var a=t.walk(/'/g);t.ptr++}else if(t.expect(/^"/)){t.ptr++;a=t.walk(/"/g);t.ptr++}else a=t.walk(/(\s|\/?>)/g);var r=t.data;t.data.parent.attributes[r.name]=a,t.state=e.INIT}},RIGHT:{[s.INIT](t){var a=t.data.parent;t.expect(/^\/>/)?(t.ptr+=2,a.right="close"):(t.ptr+=1,a.right="open"),t.state=e.LEAVE}}},TEXT:{[s.INIT](t){var e=t.walk(n);if(null==e)throw new Error("unknown state, how should I enter here?");var a=t.data.parent;e.match(/[^\s\r\n]/)&&a.getTop().elements.push(e.replace(/[\s|\r|\n]+$/,"")),t.state=s.LEAVE}}},o=new WeakMap;function h(t,e){return function(r,...n){if(o.has(r))return o.get(r)(t,e,...n);let s=[],i="",h=Math.random().toString(16).slice(2,10);for(let t=0;t<r.length;t++)t>0&&(i+=`$place_${h}_${t-1}$`,s.push(`$place_${h}_${t-1}$`)),i+=r[t];var p=new RegExp(`\\$place_${h}_\\d+\\$`,"g"),c=new a(l,i).run().tree;1===c.elements.length&&"string"!=typeof c.elements[0]&&(c=c.elements[0]);var u="return "+function t(a){return"string"==typeof a?JSON.stringify((r=a,r.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&nbsp;/g,"Â ").replace(/&amp;/g,"&"))).replace(p,function(t){return'" , '+t+' , "'}):`\n                        React.createElement(${"__Fragment__"==a.name?"React.Fragment":void 0!==e[a.name]?"components."+a.name:JSON.stringify(a.name)}, ${a.attributeMixins.length>0?"Object.assign({}, {"+Object.keys(a.attributes).map(t=>{var e="";t.match(p)?e+="["+JSON.stringify(t).replace(p,function(t){return'" + '+t+' + "'})+"]":e+=JSON.stringify(t),e+=": ";var r=a.attributes[t],n=r.match(p);return n?n[0]===r?e+=n[0]:e+=JSON.stringify(r).replace(p,function(t){return'" + '+t+' + "'}):e+=JSON.stringify(r),e}).join(",\n")+"}, "+a.attributeMixins.map(function(t){if(t.match(p))return t.match(p)[0];throw new Error("cannot expand a string "+t)}).join(", ")+")":Object.keys(a.attributes).length>0?"{"+Object.keys(a.attributes).map(t=>{var e="";t.match(p)?e+="["+JSON.stringify(t).replace(p,function(t){return'" + '+t+' + "'})+"]":e+=JSON.stringify(t),e+=": ";var r=a.attributes[t],n=r.match(p);return n?n[0]===r?e+=n[0]:e+=JSON.stringify(r).replace(p,function(t){return'" + '+t+' + "'}):e+=JSON.stringify(r),e}).join(",\n")+"}":"null"}, \n                            ${a.elements.map(t).join(",\n")}\n                        ) \n                    `;var r}(c).replace(/^[\s\r\n]+/,""),m=new Function("React","components",...s,u);return o.set(r,m),m(t,e,...n)}}"undefined"!=typeof module?module.exports={STATE:e,JSX_STATE:s,rules:l,Data:t,Context:a,JSXElement:i,jsx:h}:void 0!==typeof window&&(window.litJSX={cache:o,STATE:e,JSX_STATE:s,rules:l,Data:t,Context:a,JSXElement:i,jsx:h})}();